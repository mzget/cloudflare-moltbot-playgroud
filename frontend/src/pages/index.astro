---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header';
import Sidebar from '../components/Sidebar';
import ManualTrigger from '../components/ManualTrigger';
import NewsFeed from '../components/NewsFeed';
import NewsCarousel from '../components/NewsCarousel';
import Footer from '../components/Footer.astro';
import { Newspaper, Zap } from 'lucide-react';
---

<Layout title="Moltbot - Neural Intelligence Dashboard">
	<div class="max-w-7xl mx-auto p-4 md:p-8">
        <!-- 1. Header (Interactive Island) -->
        <Header client:load />

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <!-- 2. Sidebar (Static HTML Wrapper for Components) -->
            <div class="lg:col-span-4 xl:col-span-3">
                <div class="sidebar-static sticky top-8 p-1 rounded-3xl border border-gray-800/50">
                    <div class="p-2 mb-4 flex items-center space-x-2 px-4">
                        <Zap className="w-4 h-4 text-purple-500" />
                        <span class="text-[10px] font-mono text-gray-500 uppercase tracking-widest">Local Node Status</span>
                    </div>
                    <Sidebar client:load />
                    
                    <div class="mt-6 p-4 border-t border-gray-800/50 space-y-4">
                        <div class="h-2 w-3/4 bg-gray-800/50 rounded animate-pulse"></div>
                        <div class="h-2 w-1/2 bg-gray-800/50 rounded animate-pulse"></div>
                        <div class="h-2 w-2/3 bg-gray-800/50 rounded animate-pulse"></div>
                    </div>
                </div>
            </div>

            <!-- 3. Main Content Column -->
            <div class="lg:col-span-8 xl:col-span-9 space-y-8">
                
                <!-- Static Content Area (News Feed + Controls) -->
                <section class="space-y-6">
                    <div class="flex items-center justify-between">
                        <h2 class="text-xl font-semibold flex items-center">
                            <Newspaper className="mr-3 w-6 h-6 text-purple-400" /> 
                            Latest Intelligence
                        </h2>
                        <ManualTrigger client:load />
                    </div>
                    
                    <div class="min-h-[400px]">
                        <NewsFeed client:load />
                    </div>
                </section>

                <!-- 4. Image Carousel (Interactive Island) -->
                <section>
                    <NewsCarousel client:load />
                </section>
            </div>
        </main>

        <!-- 5. Footer (Static HTML) -->
        <Footer />
    </div>
</Layout>

<style is:global>
    /* Custom scrollbar for a more premium feel */
    ::-webkit-scrollbar {
        width: 8px;
    }
    ::-webkit-scrollbar-track {
        background: #09090b;
    }
    ::-webkit-scrollbar-thumb {
        background: #1f1f23;
        border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb:hover {
        background: #2a2a2f;
    }
</style>
